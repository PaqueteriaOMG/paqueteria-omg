<header class="header">
    <div class="header-container">
    <div class="header-brand">
        <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
            <rect x="4" y="8" width="24" height="16" rx="2" fill="currentColor" opacity="0.2"/>
            <path d="M6 10h20v12H6V10zm2 2v8h16v-8H8z" fill="currentColor"/>
            <circle cx="16" cy="16" r="2" fill="currentColor"/>
        </svg>
        </div>
        <h1 class="brand-text">PackageManager</h1>
    </div>
    
    <nav class="navigation">
        <a routerLink="/dashboard" routerLinkActive="active" class="nav-link">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/>
            <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"/>
        </svg>
        Dashboard
        </a>
        <a routerLink="/packages" routerLinkActive="active" class="nav-link">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732L14.146 12.8l-1.179 4.456a1 1 0 01-1.934 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732L9.854 7.2l1.179-4.456A1 1 0 0112 2z"/>
        </svg>
        Paquetes
        </a>
        <a routerLink="/tracking" routerLinkActive="active" class="nav-link">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"/>
        </svg>
        Rastrear
        </a>
        <a routerLink="/reports" routerLinkActive="active" class="nav-link">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
        </svg>
        Reportes
        </a>
        <!-- <a routerLink="/settings" routerLinkActive="active" class="nav-link">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"/>
        </svg>
        Configuración
        </a> -->

        <ng-container *ngIf="auth.isLoggedIn$ | async; else guestLinks">
            <div class="user-menu-container">
                <button type="button" class="user-avatar" (click)="toggleUserMenu()" aria-haspopup="true" aria-expanded="isUserMenuOpen">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path fill-rule="evenodd" d="M10 2a5 5 0 100 10 5 5 0 000-10zm-7 16a7 7 0 0114 0H3z" clip-rule="evenodd"/>
                    </svg>
                    <span class="sr-only">Menú de usuario</span>
                </button>
                <div class="user-dropdown" *ngIf="isUserMenuOpen">
                    <div class="user-info">
                        <div class="user-name">{{ (auth.user$ | async)?.nombre }}</div>
                        <div class="user-email">{{ (auth.user$ | async)?.email }}</div>
                    </div>
                    <div class="user-actions">
                        <a routerLink="/cuenta" class="dropdown-link" (click)="closeUserMenu()">Configurar cuenta</a>
                    </div>
                </div>
            </div>
            <a class="nav-link" (click)="logout()">Cerrar sesión</a>
        </ng-container>
        <ng-template #guestLinks>
            <a routerLink="/track" routerLinkActive="active" class="nav-link">Rastrear paquete</a>
            <a routerLink="/login" routerLinkActive="active" class="nav-link">Login</a>
            <a routerLink="/register" routerLinkActive="active" class="nav-link">Registro</a>
        </ng-template>
    </nav>
    </div>
</header>
